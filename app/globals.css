@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================
   CompoundPulse — Dual Theme via CSS Custom Properties
   DARK:  html (default) → near-black backgrounds, light text
   LIGHT: html.light     → white backgrounds, dark text
   Every component uses var(--cp-*) so ONE class toggle switches ALL.
   ============================================================ */

/* ── DARK (default) ── */
html, html.dark {
  color-scheme: dark;

  --cp-bg0:    #131722;   /* page background */
  --cp-bg1:    #1e222d;   /* panels, cards */
  --cp-bg2:    #2a2e39;   /* table headers, elevated */
  --cp-bg3:    #363a45;   /* borders, dividers */

  --cp-txt:    #d1d4dc;   /* primary text */
  --cp-txt2:   #787b86;   /* secondary / muted text */
  --cp-txt3:   #4c525e;   /* very muted */

  --cp-link:   #2962ff;
  --cp-linkHov:#4c8bff;

  --cp-pos:    #26a69a;
  --cp-neg:    #ef5350;
  --cp-posD:   rgba(38,166,154,0.15);
  --cp-negD:   rgba(239,83,80,0.15);

  /* Nav stays dark in both themes */
  --cp-navBg:  #1e222d;
  --cp-navHov: #2a2e39;
  --cp-navTxt: #787b86;
  --cp-navAct: #d1d4dc;

  /* Finviz-specific dark */
  --fv-nav:    #4c5261;
  --fv-nav-hov:#62697d;
  --fv-blue:   #2f91ef;
  --fv-pos:    #19803d;
  --fv-neg:    #d91e2b;
}

/* ── LIGHT ── */
html.light {
  color-scheme: light;

  --cp-bg0:    #f0f2f5;   /* page background — light grey */
  --cp-bg1:    #ffffff;   /* panels, cards — white */
  --cp-bg2:    #f5f7fa;   /* table headers — near white */
  --cp-bg3:    #d8dce6;   /* borders */

  --cp-txt:    #131722;   /* primary text — near black */
  --cp-txt2:   #5a6070;   /* secondary text — dark grey */
  --cp-txt3:   #9099a8;   /* muted */

  --cp-link:   #1a56db;
  --cp-linkHov:#1e40af;

  --cp-pos:    #0d7353;
  --cp-neg:    #c0392b;
  --cp-posD:   rgba(13,115,83,0.1);
  --cp-negD:   rgba(192,57,43,0.1);

  /* Nav stays dark */
  --cp-navBg:  #1e222d;
  --cp-navHov: #2a2e39;
  --cp-navTxt: #787b86;
  --cp-navAct: #d1d4dc;

  /* Finviz-specific light */
  --fv-nav:    #2c303b;
  --fv-nav-hov:#353945;
  --fv-blue:   #1a56db;
  --fv-pos:    #19803d;
  --fv-neg:    #d91e2b;
}

/* ── BASE ── */
@layer base {
  *, *::before, *::after { box-sizing: border-box; }

  html, body {
    background-color: var(--cp-bg0);
    color: var(--cp-txt);
    font-family: 'Lato', Verdana, Arial, Tahoma;
    font-size: 13px;
    line-height: 1.42857;
    min-height: 100vh;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    transition: background-color 0.15s, color 0.15s;
  }

  body { background-image: none !important; }

  a { color: var(--cp-link); text-decoration: none; }
  a:hover { color: var(--cp-linkHov); text-decoration: underline; }

  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: var(--cp-bg0); }
  ::-webkit-scrollbar-thumb { background: var(--cp-bg3); border-radius: 2px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--cp-txt3); }

  input, select, textarea {
    background: var(--cp-bg1);
    color: var(--cp-txt);
    border: 1px solid var(--cp-bg3);
    border-radius: 2px;
    font-family: 'Lato', Verdana, Arial, Tahoma;
    transition: background-color 0.15s, color 0.15s, border-color 0.15s;
  }
  input::placeholder { color: var(--cp-txt3); }

  *:focus { outline: none; }
  *:focus-visible { outline: 1px solid var(--cp-link); outline-offset: 1px; }
  table { border-collapse: collapse; }

  /* Transition all elements on theme switch */
  *, *::before, *::after {
    transition: background-color 0.15s, color 0.15s, border-color 0.15s;
  }
}

.is-positive { color: var(--cp-pos); }
.is-negative { color: var(--cp-neg); }

@media (max-width: 768px) {
  html, body { overflow-x: hidden; max-width: 100vw; }
  table { display: block; overflow-x: auto; }
}